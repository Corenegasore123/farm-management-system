{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Farm Management System{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                DEFAULT: '#0f172a',
              },
              accent: {
                DEFAULT: '#6366f1',
                soft: '#e0e7ff',
                purple: '#8b5cf6',
                pink: '#ec4899',
              },
            },
            boxShadow: {
              card: '0 10px 30px rgba(99, 102, 241, 0.12)',
              'card-hover': '0 20px 40px rgba(99, 102, 241, 0.18)',
              glow: '0 0 20px rgba(99, 102, 241, 0.4)'
            },
            borderRadius: {
              xl: '16px'
            },
            animation: {
              'gradient': 'gradient 8s ease infinite',
              'float': 'float 6s ease-in-out infinite',
            },
            keyframes: {
              gradient: {
                '0%, 100%': { backgroundPosition: '0% 50%' },
                '50%': { backgroundPosition: '100% 50%' },
              },
              float: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-10px)' },
              },
            }
          }
        }
      }
    </script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'attendance/css/styles.css' %}" />
    {% block head %}{% endblock %}
  </head>
  <body class="min-h-screen bg-gray-50">
    <!-- Sidebar -->
    <aside class="fixed left-0 top-0 h-full w-64 bg-white border-r border-gray-200 z-50">
      <div class="p-6 border-b border-gray-200">
        <h1 class="text-2xl font-bold text-gray-800">FarmEase</h1>
        <p class="text-sm text-gray-500 mt-1">Management System</p>
      </div>
      
      <nav class="p-4">
        <div class="mb-6">
          <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Main Menu</p>
          <a href="/attendance/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-colors mb-1">
            <i class="bi bi-speedometer2 text-lg"></i>
            <span class="font-medium">Dashboard</span>
          </a>
          <a href="/attendance/farmers/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-colors mb-1">
            <i class="bi bi-people text-lg"></i>
            <span class="font-medium">Farmers</span>
          </a>
          <a href="/attendance/students/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-colors mb-1">
            <i class="bi bi-mortarboard text-lg"></i>
            <span class="font-medium">Students</span>
          </a>
          <a href="/attendance/attendance/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition-colors mb-1">
            <i class="bi bi-calendar-check text-lg"></i>
            <span class="font-medium">Attendance</span>
          </a>
        </div>
        
        <div>
          <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Quick Actions</p>
          <a href="/attendance/students/add/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors mb-1">
            <i class="bi bi-person-plus text-lg"></i>
            <span class="font-medium">Add Student</span>
          </a>
          <a href="/attendance/farmers/add/" class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors mb-1">
            <i class="bi bi-person-plus-fill text-lg"></i>
            <span class="font-medium">Add Farmer</span>
          </a>
        </div>
      </nav>
      
      <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200">
        <div class="flex items-center gap-3 px-4 py-2">
          <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold">
            {{ user.username|first|upper|default:'U' }}
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-700">{{ user.username|default:'Admin' }}</p>
            <p class="text-xs text-gray-500">Administrator</p>
          </div>
        </div>
      </div>
    </aside>
    
    <!-- Main Content -->
    <div class="ml-64">
      <!-- Top Bar -->
      <header class="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div class="px-8 py-4 flex items-center justify-between">
          <div>
            <h2 class="text-lg font-semibold text-gray-800">{% block page_title %}Dashboard{% endblock %}</h2>
          </div>
          <div class="flex items-center gap-4">
            <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
              <i class="bi bi-bell text-gray-600"></i>
            </button>
            <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
              <i class="bi bi-gear text-gray-600"></i>
            </button>
          </div>
        </div>
      </header>
      {% if messages %}
      <div class="fixed top-20 right-8 z-50 space-y-2 max-w-md">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} px-4 py-3 rounded-lg shadow-lg border-l-4 {% if message.tags == 'success' %}bg-green-50 border-green-500 text-green-800{% elif message.tags == 'error' %}bg-red-50 border-red-500 text-red-800{% else %}bg-blue-50 border-blue-500 text-blue-800{% endif %}" role="alert">
          <div class="flex items-center gap-2">
            <i class="bi bi-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}x-circle{% else %}info-circle{% endif %}"></i>
            <span class="font-medium">{{ message }}</span>
          </div>
        </div>
        {% endfor %}
      </div>
      {% endif %}
      
      <main class="p-8">
        <div class="max-w-7xl mx-auto">
          {% block content %}{% endblock %}
        </div>
      </main>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const path = window.location.pathname;
        document.querySelectorAll('.nav-links a').forEach((a) => {
          if (a.getAttribute('href') === path) a.classList.add('active');
        });
        setTimeout(() => {
          document.querySelectorAll('.alert').forEach((el) => {
            el.classList.add('transition-opacity');
            el.style.opacity = '0';
            el.addEventListener('transitionend', () => el.remove());
          });
        }, 3000);
      });
    </script>
  </body>
</html>
